@model List<SensorValue>
@{
    ViewData["Title"] = "Home Page";
}

<div class="container">
    <div class="section">
        <!--   Icon Section   -->
        <div class="row">
            <div class="col s12 m6">
                <div class="card blue-grey darken-1">
                    <div class="card-content white-text">
                        <span class="card-title">Environment</span>
                        <p>
                            <span class="large">
                                @Model.Single(m => m.RowKey == "InsideTemp").Value.ToString("n1") &deg; F
                            </span>
                        </p>
                        <p>
                            @Model.Single(m => m.RowKey == "InsideHum").Value.ToString("n1") % Humidity
                        </p>
                        <canvas id="tempChart" data-data-url="@Url.Action("TempChartData", "Home")" style="background-color:white"></canvas>
                    </div>
                </div>
            </div>
            <div class="col s12 m6">
                <div class="card blue-grey darken-1">
                    <div class="card-content white-text">
                        <span class="card-title">Power</span>
                        <p>
                            <span class="large">
                                @Model.Single(m => m.RowKey == "PimWatts").Value.ToString("n1") mW
                                
                            </span>
                        </p>
                        <p>
                            @Model.Single(m => m.RowKey == "PiVolts").Value.ToString("n1") V
                        </p>
                        <canvas id="powerChart" data-data-url="@Url.Action("PowerChartData", "Home")" style="background-color:white"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br><br>
    <div class="section">
    </div>
</div>


@section scripts {
    <script type="text/javascript">

        var ctx = $("#tempChart");
        var jsonData = $.ajax({
            url: ctx.data("data-url"),
            dataType: "json",
            async: false
        }).responseJSON;
        var myChart = new Chart(ctx, jsonData);

        ctx = $("#powerChart");
        jsonData = $.ajax({
            url: ctx.data("data-url"),
            dataType: "json",
            async: false
        }).responseJSON;
        myChart = new Chart(ctx, jsonData);
    </script>
}